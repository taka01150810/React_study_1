# 63. 追記: 環境構築方法について（Vite版）

これまでCDNでの開発環境を使ってきましたが、より実践的にReactを扱うため、**Vite**を使った環境構築方法を紹介します。

> **Vite**は、高速なビルドと開発サーバーを特徴とするモダンなフロントエンドツールです。

## Vite環境構築の基本手順

1. **Node.jsのインストール**（必要に応じて）
2. ターミナルで以下のコマンドを実行し、プロジェクトを作成  
   ```bash
   npm create vite@latest
   ```
3. **Reactテンプレート**を選択
4. 依存パッケージのインストール  
   ```bash
   npm install
   ```
5. 開発サーバーの起動  
   ```bash
   npm run dev
   ```

以降はVite環境を使って、より実践的なReact開発を進めていきます。

---

# 64. create-react-app の前に

これまではCDNを使ってReactを扱ってきましたが、今後は**npm**を使ってReact開発環境を構築していきます。

> npmを使う際に便利なツールとして「**create-react-app**」がありますが、その前にJavaScript開発環境についての基本知識を整理します。

- **2015年頃（ES6）**にJavaScriptに多くの新機能（アロー関数、Promise、クラス、import/exportなど）が追加されました。
- 新しい書き方は古いブラウザで動作しないことがあるため、**Babel**というツールで新しいコードを古い書き方に変換（トランスパイル）する必要があります。
- Babel以外にも**Webpack**や**Polyfill Loader**など複数のツールが必要になることが多いです。
- **Node.js**はこれらのツールを動かすための土台（JavaScriptをサーバー側で動かす環境）であり、**npm（Node Package Manager）**を使って必要なパッケージを管理・インストールします。
- **Webpack**は複数のJavaScriptやCSSファイルをまとめてバンドルし、不要なコードを削減して読み込み速度を上げるツールです。
- **Polyfill**は、Babelで変換できないブラウザAPI（fetchやIntersection Observerなど）を補うために必要になることがあります。
- ReactやVue.js、Angularなどの最新フロントエンド開発では、これらのツールをセットで使うのが一般的です。

> 次の動画で、これらを踏まえたReactの開発環境構築方法を紹介予定です。

---

# 65. create-react-appのインストール

npmを使ってReact開発環境を作る便利なツール「**create-react-app（CRA）**」を紹介します。

- CRAはReactやReactDOM、Babel、Webpackなど必要なライブラリをまとめてインストールできます。
- CRAを使う前に**Node.js**と**npm**をインストールしておく必要があります。

  - [Node.js公式サイト](https://nodejs.org/)から安定版（LTS）をダウンロード・インストール推奨
  - インストール後、ターミナルやコマンドプロンプトで  
    ```bash
    node -v
    npm -v
    ```
    を入力し、バージョンが表示されればOK

## ターミナルの基本操作（Macの場合）

- `pwd`：現在のディレクトリ確認
- `ls`：ファイル・フォルダ一覧表示
- `cd フォルダ名`：ディレクトリ移動（Tabキーで補完可能）

---

Reactプロジェクト作成のために、デスクトップの「ReactTest」フォルダ内に「section6」フォルダを作成し、そこに移動します。

### CRAのインストールコマンド例（バージョン固定）

# 66. ファイル・フォルダ構成

- 前回、npmを使ってReactの開発環境をインストールし、`section6`内に`myapp`フォルダが作成された。
- `myapp`フォルダ内には多くのファイル・フォルダが存在する。

### 主なフォルダ・ファイルの説明

- **node_modulesフォルダ**  
  - `package.json`を元にインストールされた多くのライブラリが入る。  
  - サイズが大きく、数百MB（約400MB）になることもある。  
  - GitHubなどにアップロードしないことが一般的（`.gitignore`に記載）。

- **package.json**  
  - npmの設定ファイル（JSON形式）で必要なライブラリのバージョンなどが記載されている。  
  - 依存関係やスクリプト（`start`, `build`など）が定義されている。  
  - `npm install`を実行するとここに書かれた内容を元に`node_modules`が再生成される。

- **package-lock.json**  
  - 依存関係のバージョンを厳密に固定するためのファイル。

- **.gitignore**  
  - `node_modules`や`build`フォルダなどGitにアップロードしないファイル・フォルダを指定。

- **publicフォルダ**  
  - HTMLファイル（`index.html`）や画像ファイルが含まれる。  
  - `index.html`はReactアプリのルートHTMLで通常は編集不要。

- **srcフォルダ**  
  - Reactの開発用ソースコードを配置するフォルダ。

### 開発・ビルドについて

- `npm start`コマンドで開発用の簡易サーバーを起動し開発を進める。  
- 本番用ファイルは`npm run build`コマンドで生成される。  
  - `build`フォルダが作成され、最適化されたJavaScriptやCSSファイルが含まれる。  
  - 直接`index.html`を開いても動かず、サーバー上で動かす必要がある。

### 本番環境での表示

- サーバーを立ち上げる方法としては、  
  - Chrome拡張「Web Server for Chrome」などを使う方法。  
  - VSCodeのライブサーバー拡張などがある。

### その他のコマンド

- **`npm run eject`**  
  - 設定ファイルやビルド設定をプロジェクトに展開し、細かいカスタマイズが可能になるが、上級者向け。  
  - eject後は元に戻せないため注意。

- ejectした場合に生成されるフォルダやファイル（例: `config`, `scripts`）はwebpack設定やテストフレームワークなどの構成ファイルが含まれる。

---

引き続き、この`create-react-app`で生成されたコードを使って学習を進めていく。

# 67. index.js、App.jsのコードを確認する

- **index.js** はReactプロジェクトのエントリーポイント（一番最初に読み込まれるファイル）。
- これまでのCDN利用とは違い、`import`を使ってReactライブラリやコンポーネント、CSSを読み込む。
- 主なインポート例：
  - `React`、`ReactDOM`、CSSファイル、コンポーネント（例: `App`）
- `ReactDOM.createRoot` で `public/index.html` の `id="root"` のDOM要素を取得し、その中にReactアプリをレンダー（描画）する。
- `<React.StrictMode>` でアプリを囲むことで、開発時に潜在的な問題を検出しやすくする。

---

- **App.js (App.jsx)** は関数コンポーネントとして作成されている。
- ファイルの上部で必要なものを `import` し、関数コンポーネントを定義。
- `return` 内にJSX（HTMLに似た記法）を書く。
- ファイルの最後に `export default App;` と書くことで、このコンポーネントを外部から利用できるようにする。

---

- **import/exportについて**
  - `import` は他のファイルやライブラリを読み込むJavaScriptの標準機能。
  - `export default` はファイルから1つの値（関数やクラスなど）を外に出す書き方。
  - 複数の値を出す場合は名前付きエクスポートを使うが、基本は`export default`を使えば十分。
  - 詳しく知りたい場合はMDNなどで「JavaScript import/export」を検索するとよい。

---

- 実際に`App.js`の中身を書き換えると、画面表示が変わる。
- 変更を確認するには、`npm start`で簡易サーバーを立ち上げてブラウザで表示を更新すればOK。

---

この流れを理解することで、Reactアプリの起動と構成の基本がつかめる。

# 68. React Hookを使ってみる

- **コンポーネント作成の基本**
  - 1ファイル1コンポーネントが基本でわかりやすい。
  - `src` フォルダ内に `components` フォルダを作成し、その中に `TestComponent.js` を作成。
  - コンポーネントは `const TestComponent = () => { ... }` のようにアロー関数で定義。
  - 最後に `export default TestComponent;` で外部から利用可能にする。

- **TestComponentの使用方法**
  - `App.js`（または他の親コンポーネント）で `import TestComponent from './components/TestComponent';` と書きインポート。
  - JSX内に `<TestComponent />` と記述して画面に表示させる。
  - `npm start` で開発サーバーを立ち上げ、ブラウザで確認。

- **React Hook（useState）の使い方**
  - Reactフックは `import React, { useState } from 'react';` のように、Reactから個別にインポートする。
  - `TestComponent` 内で `const [count, setCount] = useState(0);` のように状態を宣言。
  - JSX内で状態を表示し、ボタンのクリックで状態を更新（例：`onClick={() => setCount(count + 1)}`）。
  - クリックするたびに数字が変わる動作を確認できる。

- **補足**
  - 他のReactフック（useEffect、useRefなど）も同様に個別にインポートして使う。
  - npmで環境構築した場合は、必ず使うフックを明示的にインポートする必要がある。

---

Reactフックの基本を理解し、コンポーネントで状態管理を行う方法が身につく内容です。


# 69. JSをexportしてみる

- **概要**
  - JavaScriptファイルから変数や関数をエクスポートし、別ファイルでインポートして利用する練習。
  - Reactフック（useStateなど）を組み合わせて作る「カスタムフック」は別セクションで扱う。

- **実装手順**

  1. **関数・変数を定義するファイル作成**
     - `src/functions` フォルダを作成。
     - `items.js` ファイルを作成。
     - 配列変数 `items` を作る（例：アイテムのリスト）。
     - 関数 `getItems` を作成し、配列全体を返す。
     - 関数 `getItem(id)` を作成し、指定したIDに一致するアイテムを返す。
     - それぞれに `export` をつけて外部に公開。

  2. **関数を使うコンポーネント作成**
     - `src/components` フォルダに `GetItemComponent.js` を作成。
     - コンポーネント関数 `GetItemComponent` を定義し、最後に `export default` でエクスポート。
     - `import { getItems, getItem } from '../functions/items';` のように波括弧付きでインポートする。
       - 相対パスはファイル構造に注意し、上の階層に戻る場合は `../` を使う。
     - `getItems()` や `getItem(id)` を呼び出して変数に代入。
     - JSX内でリスト表示（`<ul>`と`map`を使う）、キーはアイテムのIDを使う。
     - 特定IDのアイテム名も表示。

  3. **親コンポーネントでの利用**
     - `App.js`（または任意の親コンポーネント）で `GetItemComponent` をインポートし、JSX内に `<GetItemComponent />` と書いて表示。

- **ポイント**
  - JavaScriptの `export`（複数可能）と `export default`（一つだけ）を使い分ける。
  - Reactコンポーネントから関数や変数を切り離して管理し、再利用や整理がしやすくなる。
  - パス指定はファイル階層構造を意識し、間違えないよう注意。

- **まとめ**
  - 共通のデータや関数を別ファイルに切り出し、エクスポート・インポートで利用する基本的な手法を習得。
  - カスタムフックの作成は今後のセクションで紹介予定。

# 70. Atomic Design

- **Atomic Designとは**
  - コンポーネントを5種類に分類して管理する設計思想。
  - 「Atomic」は「原子」の意味。
  - 5つの分類：
    1. **Atoms（アトム）**  
       - 最小単位のパーツ（アイコン、テキスト、イメージタグなど）。
    2. **Molecules（モレキュール）**  
       - アトムを組み合わせた少し大きめの部品。
    3. **Organisms（オーガニズム）**  
       - モレキュールを複数組み合わせたコンポーネント群。
    4. **Templates（テンプレート）**  
       - オーガニズムを組み合わせてページの骨組みを作る。
    5. **Pages（ページ）**  
       - 実際に表示される完成したページ。

- **実例・参考**
  - Instagramの例で説明されることが多い。
  - 公式や記事のリンクがあると理解が深まる。

- **実務での使い方**
  - 5種類に分けると細かくなりすぎることも多い。
  - 個人的には「Pages」「Components」「Parts」など3つくらいの分類で管理することが多い。
  - 会社やプロジェクトによって使い分けるケースがある。

- **Atomic Designのメリット**
  - ページ全体を一気に作るのではなく、パーツごとに分割して作成。
  - コンポーネントの組み合わせや再利用がしやすくなる。
  - インポート・エクスポートやpropsで親子間の情報受け渡しと組み合わせて使う。

- **まとめ**
  - ReactやVue.jsでコンポーネント設計をする際に便利な考え方の一つ。
  - プロジェクトやチームに合った粒度で取り入れていくのがおすすめ。

# 71. ReactのCSSの記述方法の種類

ReactでのCSSの書き方には多くの方法があり、代表的なものを6つ紹介します。

## 1. ピュアCSS
- 普通のCSSファイルに記述する方法。
- ページ数が多くなるとクラス名の重複による上書きが発生しやすく管理が難しくなる。

## 2. CSSモジュール
- コンポーネントごとに`モジュールドットCSS`ファイルを作り、スタイルを分割して管理する方法。
- しかし、2023年3月以降は新規開発・メンテナンスが縮小されており、最近は減少傾向。

## 3. Tailwind CSS（インドCSS）
- あらかじめ色や文字サイズ、レイアウトなどの小さい単位のユーティリティクラスが用意されている。
- これらを組み合わせて効率的にスタイルを書く手法。
- 別講座で詳しく解説されている。

## 4. UIフレームワーク
- React向けにCSSとコンポーネントがセットになったライブラリ。
- 代表例：Material-UI（最近は単に「MUI」）、Chakra UIなど。
- 簡単に見栄えの良いUIを作れるため便利。

## 5. CSS-in-JS：Style Components
- JavaScriptファイルの中にCSSを記述する方法。
- スタイル専用のコンポーネントを作る形で、JSXファイル内にCSSも含められる。
- メリット：
  - レスポンス改善につながる。
  - JavaScriptの文法チェックでミスを発見しやすい。
  - HTML・JS・CSSを1ファイルにまとめて管理が容易。
  - Sass記法（&記号など）が使える。
  - Reactの機能（useStateやprops）と親和性が高く、動的なスタイル切替が可能。

## 6. その他のCSS-in-JS
- 代表的な手法として「Style Components」と「Emotion」などがあり、どちらもJavaScript内にスタイルを書く方式。

---

- 公式サイトのリンク（英語）があり、実際にインストールして試すことが推奨されている。

# 72. 【スキップ可】Styled Component (CSS in JS) を書いてみる

## 概要
ReactでCSS-in-JSの一つであるStyled Componentsを実際に使ってみる手順の解説です。

---

## 手順

1. **ライブラリのインストール**  
   ターミナルで以下のコマンドを実行し、`styled-components`をインストールします。  
   ```bash
   npm install styled-components@5.3.6

# 73. 【スキップ可】スタイルを継承させてみる

## 概要  
Styled Componentsで作成したスタイルを継承して、新しいスタイルを作る方法について解説します。

---

## ポイント

- 既存のスタイルコンポーネント（例：`BaseTitle`）をベースにして、新しいスタイルコンポーネントを作成できる。  
- 継承は `styled(BaseTitle)` のように記述し、バッククォート内で追加のCSSを定義する。  
- 例では、`BaseTitle` の文字色（青）を継承しつつ、背景色をライトグレーに追加している。  

---

## 実践例

```js
const BaseTitle = styled.h1`
  color: blue;
`;

const Title = styled(BaseTitle)`
  background-color: lightgray;
`;

```

- `Title` は `BaseTitle` のスタイルを引き継ぎつつ、背景色を付与。
- ブラウザで確認すると背景がライトグレーになる。

---

## まとめ
- スタイルの共通部分をまとめておき、細かい部分だけ別のスタイルで派生させたい時に便利。
- 継承機能を活用することで、保守性が高く効率的なスタイル管理が可能。
- 実際の開発現場でもよく使われるので知っておくと役立ちます。

# 74. 【スキップ可】スタイルをpropsやuseStateを組み合わせてみる

## 概要  
Styled ComponentsでpropsとuseStateを組み合わせ、スタイルを動的に切り替える方法を解説します。

---

## ポイント

- useStateで状態管理し、初期値は`false`（ブーリアン型）。  
- ボタンをクリックすると状態をトグル（`true` ↔ `false`）させる関数を実装。  
- スタイルコンポーネントにpropsで状態を渡し、その値に応じて背景色を変える。  
- CSS内ではバッククォート内で`${props => ...}`と関数を書き、条件によって色を切り替える。

---

## 実践例

### useStateで状態管理

```jsx
const [isRed, setIsRed] = useState(false);

const toggleColor = () => {
  setIsRed(!isRed);
};

```

### Styled Componentsで動的スタイル

```
const StyledDiv = styled.div`   background-color: ${props => (props.isRed ? 'red' : 'green')}; `;``

``````

### コンポーネント内での利用

```

return (   <>     <StyledDiv isRed={isRed}>色が変わるボックス</StyledDiv>     <button onClick={toggleColor}>色を変える</button>   </> );

```

---

## まとめ

- useStateで状態を管理し、その状態をpropsでスタイルコンポーネントに渡すことで、  
    CSSのスタイルを動的に切り替えられる。
- ボタン操作などでリアルタイムに見た目を変えるUIが簡単に作成可能。
- ReactのpropsとuseState、Styled Componentsの組み合わせは強力で便利なので、ぜひ活用を。

# 75. Emotion (CSS in JS) を書いてみる

## 概要  
前回のStyled Componentsに続き、EmotionというCSS-in-JSライブラリを紹介します。  
Emotionは後発のCSS-in-JSで、Material UI（現MUI）で標準採用されているため、MUIを使った開発時に知っておくと便利です。

---

## インストール手順

```bash
npm install @emotion/react@^11.10.15 @emotion/styled@^11.10.5
```

- `@emotion/react` と `@emotion/styled` の2つをインストール。
    
- `package.json`の`dependencies`に追加されていることを確認。
    

---

## 使い方のポイント

- `@emotion/react`から`css`関数をインポートして使う。
    
- JSX内で`css`関数を使い、バッククォート内にCSSを記述。
    
- 他のCSS-in-JSライブラリと異なり、HTMLタグはそのままでスタイルを適用可能。
    
- スタイルは自動的に一意なクラス名を生成し、クラス名の衝突を防ぐ。
    

---

## 実装例

``/** @jsxImportSource @emotion/react */ import { css } from '@emotion/react';  const style = css`   color: red; `;  export default function EmotionComponent() {   return <div css={style}>Emotionのスタイル付きコンポーネント</div>; }``

- 上記のように関数コンポーネント内で`css`関数を使う。
    
- `/** @jsxImportSource @emotion/react */`のコメントはEmotionのスタイルを正しく適用するために必要。
    

---

## 動作確認

- コンポーネントをApp.jsなどにインポートして表示させる。
    
- ブラウザで赤文字などスタイルが反映されていることを確認。
    
- 開発者ツールのElementsタブで、自動生成された一意なクラス名が付与されているのが確認できる。
    

---

## まとめ

- EmotionはMaterial UIでも利用されている信頼性の高いCSS-in-JSライブラリ。
    
- `css`関数を使って簡単にスタイルを適用でき、タグはそのまま使える。
    
- スタイルの自動管理やクラス名衝突回避機能が備わっている。
    
- コメントでのJSX自動インポート指定が必須なので注意。
    
- 今後のプロジェクトでMUIなどを使う場合は特に知っておくと便利。

# 76. Emotion まとめたり継承したり

## 概要  
引き続きEmotionの使い方を解説します。  
CSSを変数としてまとめて管理し、それを継承・組み合わせて使う方法を紹介します。

---

## ポイント

- CSSスタイルを変数として定義可能  
- 例：`const fontRed = css`、`const largeFont = css` のように複数のスタイルを変数にまとめる  
- JSX内で複数のスタイル変数を配列として渡し、複数のスタイルを適用できる  
- 変数の中で他のスタイル変数を呼び出し、スタイルの継承・まとめが可能  
- まとめておくことで共通部分を一括管理しつつ、一部だけ上書きや追加ができる

---

## 実装例

```jsx
import { css } from '@emotion/react';

const fontRed = css`
  color: red;
`;

const largeFont = css`
  font-size: 40px;
`;

// 複数のスタイルをまとめて適用
const combinedStyle = css([largeFont, fontRed]);

// 継承パターン（まとめる場合）
const font = css`
  ${largeFont};
  ${fontRed};
`;

export default function EmotionComponent() {
  return (
    <>
      <div css={combinedStyle}>複数スタイル適用（大きい文字＆赤色）</div>
      <div css={font}>継承してまとめたスタイル適用</div>
    </>
  );
}

```
## 動作確認

- 複数のCSS変数を適用した文字が大きく赤く表示されることを確認
- 継承パターンでも同様の見た目になることを確認

---

## まとめ

- EmotionではCSSを変数として管理しやすい
- 複数のCSS変数を配列でまとめて使える
- 変数の中で他のCSS変数を呼び出して継承できるため、共通スタイルと部分的なカスタマイズを両立可能
- 大規模なスタイル管理や再利用に便利な機能なので覚えておくとよい

# 77. EmotionをStyled-componentsみたいに使う

## 概要  
EmotionはStyled-componentsのようにスタイル専用コンポーネントとして使うこともできます。  
ここでは、プロップスを使って動的にスタイルを切り替える方法を紹介します。

---

## ポイント

- `import styled from '@emotion/styled'` でEmotionのスタイルコンポーネント機能を利用  
- `const Halo = styled.div` のようにスタイル専用コンポーネントを作成  
- バッククオート内にCSSを書く  
- プロップスを受け取り、関数で条件分岐して動的にCSSを切り替え可能  
- 例：`color: ${props => props.blue ? 'blue' : 'red'};`  
- JSX内で `<Halo blue={true}>` のようにプロップスを渡して色を変えられる  
- 自動生成されるクラス名はユニークで衝突しない  

---

## 実装例

```jsx
import styled from '@emotion/styled';

const Halo = styled.div`
  color: ${props => (props.blue ? 'blue' : 'red')};
`;

export default function EmotionComponent() {
  return <Halo blue={true}>Style専用コンポーネント（色が動的に変わる）</Halo>;
}

```

## 注意点

- Emotion単体で使う場合はJSX内で `css` 関数を使い、コメントを追加する必要がある
    
- スタイルコンポーネントとして使う場合はコメント不要
    
- プロジェクトや用途によって使い分けが可能
    

---

## まとめ

- EmotionはStyled-components風に簡単にスタイル専用コンポーネントを作成できる
    
- プロップスで動的にスタイルを切り替えられるので柔軟なUI設計が可能
    
- 自動生成クラス名でスタイルの競合を防止
    
- コメントの扱いなど使い分けのポイントを把握しておくと便利

# 78. このセクションのまとめ

- `create-react-app` を使うことで、本格的なReact開発環境を簡単に構築できた  
- npmを使って必要なパッケージをインストールし、コンポーネントのインポート・エクスポートでページを構成  
- 基本は「1ファイル＝1コンポーネント」で作ると見通しが良い  
- CSSの記述方法は多様で、近年はCSS-in-JSの利用が増加中  
- 今回は主に「styled-components」と「Emotion」を試した  
- 今後のセクションではMaterial-UI（現MUI）とEmotionの組み合わせも学ぶ予定  
- 以上を踏まえて次のセクションに進む

